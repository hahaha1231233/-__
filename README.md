# é—®ç­”å¹³å° (Q&A Platform)

ä¸€ä¸ªåŸºäº Spring Boot çš„ç°ä»£åŒ–é—®ç­”ç¤¾åŒºå¹³å°ï¼Œæ”¯æŒç”¨æˆ·æ³¨å†Œã€ç™»å½•éªŒè¯ç ã€é—®é¢˜å‘å¸ƒã€å›å¤ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„é—®ç­”ç¤¾åŒºç³»ç»Ÿï¼Œé›†æˆäº†ç”¨æˆ·è®¤è¯ã€å†…å®¹ç®¡ç†ã€å®‰å…¨é˜²æŠ¤ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆå’Œå“åº”å¼è®¾è®¡ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ›¡ï¸ ç”¨æˆ·è®¤è¯ä¸å®‰å…¨
- âœ… ç”¨æˆ·æ³¨å†Œï¼ˆå¸¦é‚®ç®±å¯é€‰ï¼‰
- âœ… ç™»å½•éªŒè¯ç ç³»ç»Ÿ
- âœ… å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆBCryptï¼‰
- âœ… ä¼šè¯ç®¡ç†å’Œè®°ä½æˆ‘åŠŸèƒ½
- âœ… CSRF é˜²æŠ¤

### â“ é—®ç­”åŠŸèƒ½
- âœ… é—®é¢˜å‘å¸ƒä¸ç®¡ç†
- âœ… å›å¤ä¸è®¨è®º
- âœ… æƒé™æ§åˆ¶ï¼ˆåªèƒ½åˆ é™¤è‡ªå·±çš„å†…å®¹ï¼‰
- âœ… é—®é¢˜ä¸å›å¤çš„å…³è”å±•ç¤º

### ğŸ–¼ï¸ éªŒè¯ç ç³»ç»Ÿ
- âœ… å›¾å½¢éªŒè¯ç ç”Ÿæˆï¼ˆå¸¦å¹²æ‰°çº¿ã€å™ªç‚¹ï¼‰
- âœ… Base64æ ¼å¼ç›´æ¥åµŒå…¥
- âœ… æ•°æ®åº“å­˜å‚¨çŠ¶æ€ç®¡ç†
- âœ… æ”¯æŒéªŒè¯ç åˆ·æ–°
- âœ… 5åˆ†é’Ÿè¿‡æœŸæœºåˆ¶

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Spring Boot 2.x** - åº”ç”¨æ¡†æ¶
- **Spring Security** - å®‰å…¨æ¡†æ¶
- **Spring Data JPA** - æ•°æ®æŒä¹…åŒ–
- **H2 Database** - åµŒå…¥å¼æ•°æ®åº“
- **Thymeleaf** - æ¨¡æ¿å¼•æ“
- **Lombok** - ç®€åŒ–ä»£ç 

### å‰ç«¯
- **Bootstrap 5** - UIæ¡†æ¶
- **JavaScript ES6+** - äº¤äº’é€»è¾‘
- **è‡ªå®šä¹‰CSS** - å“åº”å¼è®¾è®¡
- **Font Awesome/Bootstrap Icons** - å›¾æ ‡åº“

### å·¥å…·ä¸åº“
- **Gradle/Maven** - æ„å»ºå·¥å…·
- **H2 Console** - æ•°æ®åº“ç®¡ç†
- **Slf4j** - æ—¥å¿—è®°å½•

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/main/java/com/demo/
â”œâ”€â”€ config/           # é…ç½®ç±»
â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â””â”€â”€ WebMvcConfig.java
â”œâ”€â”€ controller/       # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ MainController.java
â”‚   â”œâ”€â”€ QuestionController.java
â”‚   â””â”€â”€ ReplyController.java
â”œâ”€â”€ service/          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ CaptchaService.java
â”‚   â”œâ”€â”€ QuestionService.java
â”‚   â”œâ”€â”€ ReplyService.java
â”‚   â””â”€â”€ UserService.java
â”œâ”€â”€ repository/       # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ CaptchaRepository.java
â”‚   â”œâ”€â”€ QuestionRepository.java
â”‚   â”œâ”€â”€ ReplyRepository.java
â”‚   â””â”€â”€ UserRepository.java
â”œâ”€â”€ model/            # å®ä½“ç±»
â”‚   â”œâ”€â”€ Captcha.java
â”‚   â”œâ”€â”€ Question.java
â”‚   â”œâ”€â”€ Reply.java
â”‚   â””â”€â”€ User.java
â”œâ”€â”€ dto/              # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ RegisterRequest.java
â””â”€â”€ util/             # å·¥å…·ç±»
    â””â”€â”€ CaptchaUtil.java

src/main/resources/
â”œâ”€â”€ static/           # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ main.js
â”‚       â”œâ”€â”€ marked.js
â”‚       â”œâ”€â”€ search.js
â”‚       â”œâ”€â”€ utils.js
â”‚       â””â”€â”€ responsive.js
â”œâ”€â”€ templates/        # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”œâ”€â”€ register.html
â”‚   â”‚   â””â”€â”€ profile.html
â”‚   â””â”€â”€ question/
â”‚       â”œâ”€â”€ list.html
â”‚       â”œâ”€â”€ detail.html
â”‚       â””â”€â”€ ask.html
â””â”€â”€ application.properties
```


### é»˜è®¤è´¦æˆ·
- é¦–æ¬¡ä½¿ç”¨éœ€è¦æ³¨å†Œè´¦æˆ·
- æ³¨å†Œæ—¶éœ€è¦éªŒè¯ç éªŒè¯

## ğŸ”§ é…ç½®è¯´æ˜

### æ ¸å¿ƒé…ç½®æ–‡ä»¶
`application.properties` åŒ…å«ä»¥ä¸‹é‡è¦é…ç½®ï¼š

```properties
# æœåŠ¡å™¨é…ç½®
server.port=8080

# H2 æ•°æ®åº“é…ç½®
spring.datasource.url=jdbc:h2:file:./data/qaplatform
spring.datasource.username=sa
spring.datasource.password=

# JPA é…ç½®
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# H2 æ§åˆ¶å°
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# éªŒè¯ç è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
captcha.timeout=300
```

### è‡ªå®šä¹‰é…ç½®
- **éªŒè¯ç æ ·å¼**: ä¿®æ”¹ `CaptchaUtil.java` ä¸­çš„é¢œè‰²ã€å­—ä½“ã€å¤§å°
- **ä¼šè¯è¶…æ—¶**: ä¿®æ”¹ `SecurityConfig.java` ä¸­çš„å®‰å…¨é…ç½®
- **å“åº”å¼è®¾è®¡**: åœ¨ `responsive.js` ä¸­è°ƒæ•´æ–­ç‚¹

## ğŸ“± åŠŸèƒ½è¯¦è§£

### 1. éªŒè¯ç ç³»ç»Ÿ
- **ç”Ÿæˆ**: éšæœºå­—ç¬¦ + å¹²æ‰°çº¿ + å™ªç‚¹
- **å­˜å‚¨**: æ•°æ®åº“å­˜å‚¨ï¼Œ5åˆ†é’Ÿè¿‡æœŸ
- **éªŒè¯**: å¿½ç•¥å¤§å°å†™ï¼Œä½¿ç”¨åæ ‡è®°
- **åˆ·æ–°**: ç‚¹å‡»å›¾ç‰‡æˆ–æ–‡å­—é“¾æ¥åˆ·æ–°

### 2. ç”¨æˆ·ç®¡ç†
- **æ³¨å†Œ**: ç”¨æˆ·åå”¯ä¸€æ€§éªŒè¯ï¼Œé‚®ç®±å¯é€‰
- **ç™»å½•**: Spring Security é›†æˆéªŒè¯ç 
- **èµ„æ–™**: æŸ¥çœ‹ä¸ªäººé—®é¢˜å’Œå›å¤ç»Ÿè®¡

### 3. é—®ç­”æµç¨‹
```
æé—® â†’ å‘å¸ƒé—®é¢˜ â†’ ç­‰å¾…å›å¤ â†’ äº’åŠ¨è®¨è®º â†’ é—®é¢˜è§£å†³
```

### 4. æƒé™æ§åˆ¶
- ç”¨æˆ·åªèƒ½åˆ é™¤è‡ªå·±çš„é—®é¢˜å’Œå›å¤
- ç™»å½•ç”¨æˆ·æ‰èƒ½æé—®å’Œå›å¤
- æ¸¸å®¢åªèƒ½æµè§ˆ

## ğŸ¨ å‰ç«¯ç‰¹æ€§

### å“åº”å¼è®¾è®¡
- ç§»åŠ¨ç«¯å‹å¥½çš„å¸ƒå±€
- è‡ªé€‚åº”å±å¹•å°ºå¯¸
- è§¦æ‘¸å‹å¥½çš„äº¤äº’

### äº¤äº’åŠŸèƒ½
- âœ… å®æ—¶è¡¨å•éªŒè¯
- âœ… éªŒè¯ç åˆ·æ–°
- âœ… Markdown é¢„è§ˆ
- âœ… è‡ªåŠ¨æ¶ˆæ¯æç¤º
- âœ… å­—ç¬¦è®¡æ•°å™¨
- âœ… ç¡®è®¤å¯¹è¯æ¡†

### ç”¨æˆ·ä½“éªŒ
- âœ… æµç•…çš„åŠ¨ç”»æ•ˆæœ
- âœ… æ¸…æ™°çš„åé¦ˆæœºåˆ¶
- âœ… é”®ç›˜å¿«æ·é”®æ”¯æŒ
- âœ… ç¦»çº¿çŠ¶æ€æ£€æµ‹

## ğŸ”’ å®‰å…¨ç‰¹æ€§

1. **å¯†ç å®‰å…¨**
   - BCrypt å¼ºå“ˆå¸Œç®—æ³•
   - å¯†ç å¼ºåº¦éªŒè¯

2. **ä¼šè¯å®‰å…¨**
   - CSRF ä¿æŠ¤
   - Session ç®¡ç†
   - è®°ä½æˆ‘åŠŸèƒ½

3. **æ•°æ®å®‰å…¨**
   - SQL æ³¨å…¥é˜²æŠ¤
   - XSS é˜²æŠ¤
   - è¾“å…¥éªŒè¯å’Œæ¸…ç†

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„
```
users (ç”¨æˆ·è¡¨)
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ username (å”¯ä¸€)
â”œâ”€â”€ password (åŠ å¯†)
â”œâ”€â”€ email (å¯é€‰)
â””â”€â”€ created_at

questions (é—®é¢˜è¡¨)
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ title
â”œâ”€â”€ content
â”œâ”€â”€ user_id (å¤–é”®)
â””â”€â”€ created_at

replies (å›å¤è¡¨)
â”œâ”€â”€ id (ä¸»é”®)
â”œâ”€â”€ content
â”œâ”€â”€ user_id (å¤–é”®)
â”œâ”€â”€ question_id (å¤–é”®)
â””â”€â”€ created_at

captchas (éªŒè¯ç è¡¨)
â”œâ”€â”€ captcha_id (ä¸»é”®)
â”œâ”€â”€ captcha_code
â”œâ”€â”€ base64_image
â”œâ”€â”€ expire_time
â””â”€â”€ is_used
```



**æç¤º**: è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„é¡¹ç›®ï¼Œé€‚åˆä½œä¸ºå­¦ä¹ æ¡ˆä¾‹æˆ–äºŒæ¬¡å¼€å‘çš„åŸºç¡€ã€‚é¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œä»£ç æ³¨é‡Šè¯¦ç»†ï¼Œä¾¿äºç†è§£å’Œæ‰©å±•ã€‚
